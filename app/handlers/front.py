from app.handlers import base
from mongoengine.queryset import DoesNotExist

class FrontPageHandler(base.BaseHandler):
    '''
    Check user status and either load the home screen or the
    welcome page.
    '''
    def on_get(self):
        #if not self.current_user:
        #    self.base_render("welcome.html")
        #else:
        #    self.redirect("/home")
	#self.base_render("welcome.html")
	self.base_render("intro.html")

class KeywordHandler(base.BaseHandler):
    def on_post(self):
	keywords = self.get_argument("txtSearch",None)
	if not keywords:
		return ("No Keywords entered",)
	keyword_array = keywords.split(" ")#User.objects(id = uid).get()
	if keywords=="suzu":
		keywords = "takkos"
	return (keywords,) 


    def on_success(self, feed):	
	if feed == "theo":
		self.base_render("theo.html")
	else:
		feed= {"dates": [["2011-01-26 00:00:00", "2011-01-26 00:05:00", "2011-01-26 00:10:00", "2011-01-26 00:15:00", "2011-01-26 00:20:00", "2011-01-26 00:25:00", "2011-01-26 00:30:00", "2011-01-26 00:35:00", "2011-01-26 00:40:00", "2011-01-26 00:45:00", "2011-01-26 00:50:00", "2011-01-26 00:55:00", "2011-01-26 01:00:00", "2011-01-26 01:05:00", "2011-01-26 01:10:00", "2011-01-26 01:15:00", "2011-01-26 01:20:00", "2011-01-26 01:25:00", "2011-01-26 01:30:00", "2011-01-26 01:35:00", "2011-01-26 01:40:00", "2011-01-26 01:45:00", "2011-01-26 01:50:00", "2011-01-26 01:55:00", "2011-01-26 02:00:00", "2011-01-26 02:05:00", "2011-01-26 02:10:00", "2011-01-26 02:15:00", "2011-01-26 02:20:00", "2011-01-26 02:25:00", "2011-01-26 02:30:00", "2011-01-26 02:35:00", "2011-01-26 02:40:00", "2011-01-26 02:45:00", "2011-01-26 02:50:00", "2011-01-26 02:55:00", "2011-01-26 03:00:00", "2011-01-26 03:10:00", "2011-01-26 03:15:00", "2011-01-26 03:20:00", "2011-01-26 03:25:00", "2011-01-26 03:30:00", "2011-01-26 03:35:00", "2011-01-26 03:40:00", "2011-01-26 03:45:00", "2011-01-26 03:50:00", "2011-01-26 03:55:00", "2011-01-26 04:00:00", "2011-01-26 04:05:00", "2011-01-26 04:10:00", "2011-01-26 04:15:00", "2011-01-26 04:20:00", "2011-01-26 04:25:00"]], "meta": [{"namedEntities": [["Egypt january25 Egypt RT", 5]], "title": "event0", "locations": [], "keywords": [["need", 6], ["peopl", 6], ["site", 6], ["test", 6]], "authors": 6, "date": "2011-01-26 00:05:00"}, {"namedEntities": [["Triplem We", 1]], "title": "event1", "locations": [["Masbiro", 3]], "keywords": [["brick", 3], ["bridg", 3], ["build", 3], ["head", 3], ["masbiro", 3], ["octob", 3], ["shoot", 3], ["throw", 3], ["toward", 3]], "authors": 3, "date": "2011-01-26 00:05:00"}, {"namedEntities": [["Sarahngb What", 1]], "title": "event2", "locations": [], "keywords": [["!!", 7], ["90", 7], ["car", 7], ["eltahrir", 7], ["explos", 7], ["squar", 7], ["???!", 2], ["pic", 2], ["video", 2]], "authors": 7, "date": "2011-01-26 00:10:00"}, {"namedEntities": [], "title": "event3", "locations": [["Egypt", 2]], "keywords": [["protest", 4], ["6th", 2], ["bridg", 2], ["close", 2], ["downtown", 2], ["give", 2], ["head", 2], ["octob", 2], ["polic", 2]], "authors": 2, "date": "2011-01-26 00:10:00"}, {"namedEntities": [["Egypt Jan25 RT", 3]], "title": "event4", "locations": [], "keywords": [["act", 8], ["contrari", 8], ["leader", 8], ["conscienc", 4], ["must", 4]], "authors": 4, "date": "2011-01-26 00:30:00"}, {"namedEntities": [["Suez", 3]], "title": "event5", "locations": [], "keywords": [["arbien", 3], ["clash", 3], ["famou", 3], ["quarter", 3], ["suez", 3]], "authors": 3, "date": "2011-01-26 00:35:00"}, {"namedEntities": [["Egypt Ministry Interior", 2]], "title": "event6", "locations": [["Indeed", 2]], "keywords": [[",\"", 2], ["anonym", 2], ["attack", 2], ["fame", 2], ["inde", 2], ["interior", 2], ["ministri", 2], ["pro", 2], ["reportedli", 2]], "authors": 2, "date": "2011-01-26 00:35:00"}, {"namedEntities": [["Zeinobia Our Tunisian", 1]], "title": "event7", "locations": [], "keywords": [["forget", 9], ["friend", 9], ["inde", 9], ["tunisian", 9], ["us", 9], ["lol", 2]], "authors": 9, "date": "2011-01-26 00:40:00"}, {"namedEntities": [["Zeinobia My", 1]], "title": "event8", "locations": [], "keywords": [["except", 3], ["fb", 3], ["friend", 3], ["non", 3], ["noth", 3], ["politic", 3], ["share", 3], ["video", 3]], "authors": 3, "date": "2011-01-26 00:50:00"}, {"namedEntities": [], "title": "event9", "locations": [], "keywords": [["charg", 3], ["footag", 3], ["great", 3], ["polic", 3], ["protest", 3], ["retreat", 3], ["revolut", 3], ["riot", 3], ["\":", 1]], "authors": 3, "date": "2011-01-26 01:00:00"}, {"namedEntities": [], "title": "event10", "locations": [], "keywords": [["crisi", 6], ["escal", 6], ["full", 6], ["offici", 6], ["situat", 6]], "authors": 6, "date": "2011-01-26 01:15:00"}, {"namedEntities": [["Rocked Violence Nationwide Protests Rage Against US Backed Dictator", 1]], "title": "event11", "locations": [["Egypt", 1]], "keywords": [["back", 2], ["dictat", 2], ["nationwid", 2], ["rage", 2], ["rock", 2], ["us", 2], ["violenc", 2], ["citj", 1]], "authors": 2, "date": "2011-01-26 01:30:00"}, {"namedEntities": [["Tear", 1]], "title": "event12", "locations": [], "keywords": [["case", 6], ["caus", 6], ["ga", 6], ["horribl", 6], ["might", 6], ["suffoc", 6], ["tear", 6], ["thrown", 6], ["underground", 6]], "authors": 6, "date": "2011-01-26 01:30:00"}, {"namedEntities": [], "title": "event13", "locations": [], "keywords": [["confisc", 6], ["paper", 6], ["phone", 6], ["polic", 6], ["stole", 6], ["wallet", 6], ["3arabawi", 5]], "authors": 6, "date": "2011-01-26 01:45:00"}, {"namedEntities": [["Gamal Heshmat", 4]], "title": "event14", "locations": [["Cairo", 4]], "keywords": [["mb", 8], ["arrest", 4], ["downtown", 4], ["former", 4], ["gamal", 4], ["heshmat", 4], ["leader", 4], ["mp", 4], ["senior", 4]], "authors": 4, "date": "2011-01-26 02:10:00"}, {"namedEntities": [["Cairo Tahrir Sq", 11]], "title": "event15", "locations": [], "keywords": [["could", 12], ["get", 12], ["onlin", 12], ["password", 12], ["phone", 12], ["protest", 12], ["remov", 12], ["sq", 12], ["tahrir", 12]], "authors": 12, "date": "2011-01-26 03:50:00"}, {"namedEntities": [], "title": "event16", "locations": [], "keywords": [["articl", 2], ["control", 2], ["ever", 2], ["funniest", 2], ["gov", 2], ["mayb", 2], ["paper", 2], ["probabl", 2], ["read", 2]], "authors": 2, "date": "2011-01-26 03:55:00"}, {"namedEntities": [["Cairo", 16]], "title": "event17", "locations": [["New", 27]], "keywords": [["polic", 212], ["protest", 137], ["tear", 64], ["ga", 61], ["chase", 52], ["riot", 41], ["egyptian", 40], ["us", 36], ["3arabawi", 34]], "authors": 171, "date": "2011-01-26 04:20:00"}, {"namedEntities": [["Mubarak", 77]], "title": "event18", "locations": [["Egypt", 167]], "keywords": [["protest", 475], ["egyptian", 195], ["mubarak", 138], ["peopl", 118], ["day", 116], ["tahrir", 115], ["today", 99], ["use", 92], ["news", 86]], "authors": 650, "date": "2011-01-26 04:25:00"}, {"namedEntities": [], "title": "event19", "locations": [["Egyptian", 10]], "keywords": [["author", 10], ["call", 10], ["egyptian", 10], ["handl", 10], ["peac", 10], ["protest", 10], ["interest", 1]], "authors": 10, "date": "2011-01-26 04:25:00"}], "counts": [[132.0, 116.0, 118.0, 110.0, 106.0, 112.0, 98.0, 95.0, 96.0, 99.0, 86.0, 92.0, 92.0, 70.0, 79.0, 101.0, 47.0, 52.0, 75.0, 64.0, 48.0, 69.0, 59.0, 53.0, 40.0, 55.0, 28.0, 25.0, 31.0, 30.0, 30.0, 27.0, 36.0, 42.0, 42.0, 49.0, 35.0, 29.0, 44.0, 33.0, 33.0, 36.0, 28.0, 25.0, 19.0, 40.0, 25.0, 22.0, 33.0, 31.0, 20.0, 21.0, 22.0]]}

		self.base_render("timeline.html", feed = feed)
	

